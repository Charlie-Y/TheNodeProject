// Generated by CoffeeScript 1.7.1
(function() {
  var ART_LINE_CLASS, BOOK_TEXT, Color, addRandomShit, body, coinToss, generateShit, getWord, inputElemFromType, intializeRandomShit, randomInputElement, setPoemWord, splitText, traverseRandomShit, useText, wordIndex;

  console.log("app.coffee");


  /* Setup and Constants */

  BOOK_TEXT = "The cats nestle close to their kittens,\n The lambs have laid down with the sheep.\n You are cozy and warm in your bed, my dear.\n Please go the fuck to sleep.\n \n The windows are dark in the town, child.\n The whales huddle down in the deep.\n I'll read you one very last book if you swear\n You'll go the fuck to sleep.\n \n The eagles who soar through the sky are at rest\n And the creatures who crawl, run and creep.\n I know you're not thirsty. That's bullshit. Stop lying.\n Lie the fuck down, my darling, and sleep.\n \n The wind whispers soft through the grass, hon.\n The field mice, they make not a peep.\n It's been thirty-eight minutes already.\n Jesus Christ, what the fuck? Go to sleep.\n \n All the kids from day care are in dreamland.\n The froggie has made his last leap.\n Hell no, you can't go to the bathroom.\n You know where you can go? The fuck to sleep.\n \n The owls fly forth from the treetops.\n Through the air they soar and they sweep.\n The hot, crimson rage fills my heart, love.\n For real: shut the fuck up and sleep.\n \n The cubs and the lions are snoring (snore)\n Wrapped in a big, snuggly heap.\n How come you can do all this other great shit\n But you can't lie the fuck down and sleep?\n \n The seeds slumber beneath the earth now,\n And the crops that the farmers will reap.\n No more questions, this interview's over.\n I've got two words for you, kid: fucking sleep.\n \n The tiger reclines in the Siberian jungle.\n The sparrow has silenced her cheep.\n Fuck your stuffed bear, I'm not getting you shit.\n Close your eyes, cut the crap: sleep.\n \n Flowers doze low in the meadows\n And high on the mountains so steep.\n My life is a failure, I'm a shitty-ass parent.\n Stop fucking with me please, and sleep.\n \n The giant pangolins of Madagascar are snoozing\n As I lie here and openly weep.\n Sure, fine, whatever, I'll bring you some milk.\n Who the fuck cares? You're not gonna sleep.\n \n This room is all I can remember.\n The furniture crappy and cheap.\n You win! You escape, you run down the hall\n As I nod the fuck off and sleep.\n \n Bleary and dazed I awaken\n To find your eyes shut, so I keep\n My fingers crossed tight, as I tip-toe away\n And pray that you're fucking asleep.\n \n We're finally watching our movie.\n Popcorn's in the microwave: \"beep!\"\n Oh shit, goddamn it, you've got to be kidding.\n Go the fuck back to sleep!\n";

  window.BOOK_TEXT = BOOK_TEXT;

  ART_LINE_CLASS = 'art-line';

  Color = net.brehaut.Color;

  generateShit = true;

  useText = true;

  body = document.querySelector('body');

  wordIndex = 0;

  splitText = BOOK_TEXT.split(/\n| /);

  getWord = function() {
    if (wordIndex >= splitText.length) {
      wordIndex = 0;
      return "";
    }
    return splitText[wordIndex++];
  };

  setPoemWord = function(elem, elemType, nextWord) {
    var option;
    if (elemType === 'select') {
      option = document.createElement('option');
      option.textContent = nextWord;
      elem.appendChild(option);
    }
    if (elemType === 'submit') {
      elem.value = nextWord;
    } else {
      return elem.value = nextWord;
    }
  };

  addRandomShit = function() {
    var newElem;
    newElem = inputElemFromType(randomInputElement());
    return body.appendChild(newElem);
  };

  intializeRandomShit = function() {
    var num, _i, _ref;
    for (num = _i = 0, _ref = splitText.length; 0 <= _ref ? _i <= _ref : _i >= _ref; num = 0 <= _ref ? ++_i : --_i) {
      addRandomShit();
    }
    if (generateShit) {
      return $(window).scroll(function() {
        var _j, _results;
        if ($(window).scrollTop() + $(window).height() + 100 > $(document).height()) {
          _results = [];
          for (num = _j = 0; _j <= 30; num = ++_j) {
            _results.push(addRandomShit());
          }
          return _results;
        }
      });
    }
  };

  randomInputElement = function() {
    var elemType, inputTypes;
    inputTypes = ['submit', 'password', 'select', 'input', 'radio', 'checkbox', 'submit'];
    elemType = inputTypes[Math.floor(inputTypes.length * Math.random())];
    return elemType;
  };

  inputElemFromType = function(elemType) {
    var elem, nextWord, randomClass, randomClasses;
    elem = void 0;
    if (elemType === 'select') {
      elem = document.createElement('select');
    } else {
      elem = document.createElement('input');
      elem.type = elemType;
      elem.value = "   ";
      if (elemType === 'checkbox' || elemType === 'radio') {
        elem.checked = coinToss();
      }
    }
    randomClasses = ["random-1", "random-2", "random-3"];
    randomClass = randomClasses[Math.floor(randomClasses.length * Math.random())];
    elem.className += "random-shit " + randomClass;
    nextWord = getWord();
    if (nextWord === "") {
      elem = document.createElement("br");
    } else {
      if (useText) {
        setPoemWord(elem, elemType, nextWord);
      }
    }
    return elem;
  };

  coinToss = function() {
    var result;
    result = Math.round(Math.random()) === 1;
    return result;
  };

  traverseRandomShit = function() {
    var focusElem, inputIndex;
    inputIndex = 0;
    focusElem = function() {
      var elem, initialList, timeout;
      initialList = document.querySelectorAll('.random-shit');
      elem = initialList[inputIndex];
      if (elem !== void 0) {
        elem.focus();
        inputIndex++;
        elem.checked = false;
        if (elem.type === 'submit') {
          elem.value = "   ";
        } else {
          elem.value = "";
        }
      }
      timeout = 60;
      if (elem !== void 0) {
        if (elem.type === 'radio' || elem.type === 'checkbox') {
          timeout = 40;
        }
      }
      return window.setTimeout(function() {
        return focusElem();
      }, timeout + Math.round(Math.random() * 100));
    };
    return focusElem();
  };


  /* Execution */

  intializeRandomShit();

  traverseRandomShit();

}).call(this);
